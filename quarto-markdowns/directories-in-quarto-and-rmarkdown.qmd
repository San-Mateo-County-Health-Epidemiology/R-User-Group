---
title: "Directories in Quarto and R Markdown"
format: gfm
author: "Beth Jump"
date: "2026-01-22"
execute:
  warning: false
---

## Background

Root directories for R Markdown and Quarto files work a bit differently than other R files and can cause a lot of headaches. 

By default your working directory for your R Markdown or Quarto document should be the directory where your markdown is saved. You can check or change this here: **Tools > Global Options > R Markdown**:

![](images/rmarkdown-dir-options.png){width=500}

This [chapter](https://bookdown.org/yihui/rmarkdown-cookbook/working-directory.html) goes into more detail about options for setting your R Markdown or Quarto working directory and some pros and cons for each option. 

## In practice

We should use the default **document** setting so that documents run consistently on all of our computers. 

Using the **document** setting raises an issue - what if you have an R Markdown or Quarto document in a sub-directory and you're fetching data from somewhere else?

### Project based workflows

If you're working within a project, you should consider the [`here`](https://here.r-lib.org/) package. It allows you to easily find files from other directories within your project.

This [vignette](https://here.r-lib.org/articles/rmarkdown.html) explains exactly how it works in R Markdown. If you want to test it out, create a new R Markdown or Quarto file and run:

```{r}
#| eval: false
 
here::here()
```

And then run:

```{r}
#| eval: false

getwd()

```

And you'll see that `here::here()` returns the project directory while `getwd()` returns your document directory. 

### Non-project based workflows 

If you're working in a non-project workflow, you likely need to specify full paths to fetch your data. 

You can use `setwd()` to fetch data, but that will only work in the chunk you run it in. This isn't a problem if you load all of your data at once but if you load data throughout, you might consider using this in your setup chunk:

```
knitr::opts_knit$set(root.dir = '<dir goes here>')

```

### Rendering R Markdowns
#### with the `rmarkdown::render()` function

The `rmarkdown::render()` function allows you to programmatically render markdowns. You can specify a root directory (`knit_root_dir`) but if you don't it will default to the directory where your document lives. This is great because that means it should work the same way it does when you render it manually with the **Document** default set. 

### Rendering Quarto documents
#### with `quarto::quarto_render()`

Like the `rmarkdown::render()` function, the `quarto::quarto_render()` function allows you to render quarto documents from another script. The `quarto::quarto_render()` function has an option to specify the `execute_dir` but if you leave this empty the function seems to use parent directory where the document is stored (just like in `rmarkdown::render()`). 

#### from command line 

Unlike with R Markdown, you can render Quarto documents from the command line (ex: the Terminal in RStudio) using the `quarto render` command:

`quarto render <path-to-quarto-with-no-spaces.qmd>`

When you do this, the file paths in the quarto doc should be referenced according to the parent directory where the document is stored, just like with the `rmarkdown::render()` and `quarto::quarto_render()` functions. 